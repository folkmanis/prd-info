<div class="top-panel mat-elevation-z4">
    <!-- Aprēķina izveide un saņemšana -->
    <section class="selection">
        <mat-form-field>
            <mat-label>Klienta nosaukums</mat-label>
            <mat-select [formControl]="customerId">
                <mat-option value="">Visi</mat-option>
                <mat-option *ngFor="let customer of customers$ | async" [value]="customer.CustomerName">
                    {{customer.CustomerName}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-raised-button (click)="onCreateInvoice()" color="primary"
            [disabled]="customerId.invalid || !canSubmit || customerId.value ===''">
            Izveidot aprēķinu
        </button>
    </section>
    <section class="list">
        <p *ngIf="grandTotal$ | async as grandTotal;">
            <strong>
                Kopā | {{grandTotal | currency}}
            </strong>
        </p>
        <p *ngFor="let total of totals$ | async">
            {{total._id}} | {{total.count}} | {{total.total | currency}}
        </p>
    </section>
</div>
<!-- Darbu atlase -->
<section>
    <app-job-selection-table [jobs]="jobs$ | async" (selected)="onJobSelected($event)">
    </app-job-selection-table>
</section>
<app-scroll-to-top position="fixed"></app-scroll-to-top>