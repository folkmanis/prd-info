<header>
  @if (history.length > 2) {
    <button mat-icon-button appKeyPress="escape" tabindex="-1" (click)="onBack()">
      <mat-icon> arrow_back </mat-icon>
    </button>
  } @else {
    <a mat-icon-button routerLink="..">
      <mat-icon> arrow_upward </mat-icon>
    </a>
  }

  <div class="headline-small job-name">
    @if (jobId()) {
      <span> {{ jobId() }} - </span>
    }
    {{ value().name }}
  </div>
</header>

<mat-divider />

<app-job-form [formControl]="form" [jobId]="jobId()">
  <mat-card column-content>
    <mat-card-content>
      <app-upload-progress [progress]="fileUploadProgress$ | async" />

      <!-- Folderis -->
      @if (jobId()) {
        <app-folder-path [path]="folderPath()" (createFolder)="onCreateFolder()" [(updatePath)]="updatePath" [enabled]="updateFolderLocationEnabled()" />
      }

      <app-drop-folder
        [folders]="dropFolders()"
        [(folder)]="dropFolder"
        [(folderActive)]="dropFolderActive"
        [disabled]="(isUpload() === false && value().files === null) || dropFolders().length === 0"
      />
    </mat-card-content>
  </mat-card>
</app-job-form>

<footer>
  @if (jobId()) {
    <button mat-flat-button appKeyPress="ctrlEnter" [disabled]="saveDisabled()" (click)="onUpdate()">SaglabƒÅt</button>
  } @else {
    <button mat-flat-button [disabled]="saveDisabled()" appKeyPress="ctrlEnter" (click)="onCreate()">Izveidot</button>
  }
</footer>
