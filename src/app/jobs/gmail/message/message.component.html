<div class="container">

    <mat-card>
        <mat-card-title>

            <a mat-mini-fab routerLink="..">
                <mat-icon>
                    chevron_left
                </mat-icon>
            </a>

            <span>
                {{ from$ | async }}
            </span>

        </mat-card-title>
    </mat-card>



    <mat-card *ngFor="let message of messages$ | async">


        <mat-card-content>
            <div class="snippet">
                <span [innerHTML]="message.snippet"></span>
                <span *ngIf="message.hasAttachment">
                    <mat-icon>
                        attachment
                    </mat-icon>
                </span>
            </div>

            <app-attachments [attachments]="message.attachments" #attachmentList>
            </app-attachments>

        </mat-card-content>


        <mat-card-actions *ngIf="message.hasAttachment">
            <button mat-raised-button (click)="createJob(message, attachmentList.selected)"
                [disabled]="!attachmentList.selected?.length || (busy$ | async)">
                SAGLABÄ€T
            </button>
        </mat-card-actions>

        <mat-card-footer *ngIf="busy$ | async">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </mat-card-footer>

    </mat-card>


</div>