<table class="mat-elevation-z4" [formGroup]="prodFormArray">

    <thead>
        <tr>
            <th *ngIf="isEnabled" class="column-action"></th>
            <th class="column-name">Prece</th>
            <th class="column-count">Skaits</th>
            <th class="column-price">Cena</th>
            <th class="column-total">Summa</th>
            <th class="column-comments">Piezīmes</th>
        </tr>
    </thead>

    <tbody>

        <tr *ngFor="let prod of prodFormArray.controls; index as idx;" [formArrayName]="idx">
            <!-- Dzēšanas poga -->
            <td *ngIf="isEnabled">
                <button mat-icon-button (click)="removeProduct(idx)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
            <!-- Preces nosaukums -->
            <td>
                <app-product-autocomplete formControlName="name" [customerProducts$]="customerProducts$">
                </app-product-autocomplete>
            </td>
            <!-- Skaits -->
            <td class="column-count">
                <mat-form-field>
                    <input matInput type="number" formControlName="count">
                </mat-form-field>
            </td>
            <!-- Cena -->
            <td class="column-price">
                <mat-form-field>
                    <input matInput type="number" formControlName="price">
                </mat-form-field>
            </td>
            <!-- Summa -->
            <td>
                {{prod.value.count * prod.value.price | currency}}
            </td>
            <!-- Piezīmes -->
            <td>
                <mat-form-field>
                    <input matInput type="text" formControlName="comment">
                </mat-form-field>
            </td>

        </tr>

    </tbody>

    <tfoot>
        <tr>
            <td *ngIf="isEnabled">
                <button mat-icon-button (click)="addNewProduct$.next()" [disabled]="isValid === false"
                    matTooltip="Ctrl-+">
                    <mat-icon>add</mat-icon>
                </button>
            </td>
            <td [colSpan]="5"></td>
        </tr>
    </tfoot>

</table>