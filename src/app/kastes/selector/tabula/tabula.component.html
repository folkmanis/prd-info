<div *ngIf="colorCodes$ | async as colorCodes;" class="container" #scrollContainer scroll-to-top>

  <!-- Sākas tabula -->
  <table mat-table [dataSource]="dataSource$" [trackBy]="trackByFn" class="mat-elevation-z4" aria-label="Kastes">

    <!-- Sleja ar atzīmi par uzlīmes esamību -->
    <ng-container matColumnDef="label">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row;" [class.label]="row.kastes.uzlime"></td>
    </ng-container>

    <!-- Id Column -->
    <ng-container matColumnDef="kods">
      <th mat-header-cell *matHeaderCellDef>Nr</th>
      <td mat-cell *matCellDef="let row;">{{row.kods}}</td>
    </ng-container>

    <!-- Adrese sleja -->
    <ng-container matColumnDef="adrese">
      <th mat-header-cell *matHeaderCellDef mat>Adrese</th>
      <td mat-cell *matCellDef="let row;">{{row.adrese}} ({{row.kastes.total}})
      </td>
    </ng-container>

    <!-- Dzeltenā sleja -->
    <ng-container matColumnDef="yellow">
      <th mat-header-cell *matHeaderCellDef [style.color]="colorCodes.yellow">Y</th>
      <td mat-cell *matCellDef="let row;" [style.color]="colorCodes.yellow">
        {{row.kastes.yellow | hideZero}}
      </td>
    </ng-container>

    <!-- Rozā sleja -->
    <ng-container matColumnDef="rose">
      <th mat-header-cell *matHeaderCellDef [style.color]="colorCodes.rose">R</th>
      <td mat-cell *matCellDef="let row;" [style.color]="colorCodes.rose">
        {{row.kastes.rose | hideZero}}
      </td>
    </ng-container>

    <!-- Baltas sleja -->
    <ng-container matColumnDef="white">
      <th mat-header-cell *matHeaderCellDef [style.color]="colorCodes.white">W</th>
      <td mat-cell *matCellDef="let row;" [style.color]="colorCodes.white">
        {{row.kastes.white | hideZero}}</td>
    </ng-container>
    <!-- Gatavs -->
    <ng-container matColumnDef="gatavs">
      <th mat-header-cell *matHeaderCellDef>
      </th>
      <td mat-cell *matCellDef="let row;">
        <mat-checkbox MatCheckboxClickAction='noop' (click)="onGatavs(row)" color="accent" [checked]="row.kastes.gatavs"
          *ngIf="!row.loading; else spinner" [disabled]="row.pending"> </mat-checkbox>
        <ng-template #spinner>
          <mat-spinner [diameter]="32"></mat-spinner>
        </ng-template>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onSelected(row)"
      [class.selected]="row === selectedKaste" [appRowId]="row"></tr>
  </table>
  <div class="blank"></div>

</div>