<table>
    <thead>
        <th> Klients </th>
        <th> Cena </th>
        <th> </th>
    </thead>

    <tbody [formGroup]="pricesForm">
        <tr *appFormArrayFor="let control of pricesForm; index as idx; data as data;" [formArrayName]="idx">
            <!-- Klients ar labošanu -->
            <td class="customer-name">
                <mat-form-field>
                    <mat-select formControlName="customerName">
                        <mat-option *ngFor="let customer of customers$ | async" [value]="customer.CustomerName" [disabled]="customer.disabled">
                            {{customer.CustomerName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
            <!-- Cena labojama -->
            <td class="price">
                <mat-form-field>
                    <input matInput formControlName="price" type="number">
                </mat-form-field>
            </td>
            <!-- Pogas -->
            <td class="buttons">
                <button mat-icon-button (click)="onDeleteRow(idx)" matTooltip="Dzēst">
                    <mat-icon>delete_outline</mat-icon>
                </button>
            </td>
        </tr>
    </tbody>

    <tfoot>
        <td colspan="2">
            <span *ngIf="pricesForm.hasError('duplicates')" class="error">
                Atkārtoti norādīts klients {{pricesForm.getError('duplicates')}}
            </span>
        </td>
        <td>
            <button *ngIf="isAddFn()" mat-icon-button (click)="onAppendPrice()" matTooltip="Pievienot cenu" [disabled]="!pricesForm.valid">
                <mat-icon>add</mat-icon>
            </button>
        </td>
    </tfoot>
</table>